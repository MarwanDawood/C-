
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <!--
This HTML was auto-generated from MATLAB code.
To make changes, update the MATLAB code and republish this document.
      --><title>Parametric Audio Equalizer</title><meta name="generator" content="MATLAB 9.5"><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2018-07-24"><meta name="DC.source" content="ParametricAudioEqualizerExample.m"><style type="text/css">
html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,font,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none}:focus{outine:0}ins{text-decoration:none}del{text-decoration:line-through}table{border-collapse:collapse;border-spacing:0}

html { min-height:100%; margin-bottom:1px; }
html body { height:100%; margin:0px; font-family:Arial, Helvetica, sans-serif; font-size:10px; color:#000; line-height:140%; background:#fff none; overflow-y:scroll; }
html body td { vertical-align:top; text-align:left; }

h1 { padding:0px; margin:0px 0px 25px; font-family:Arial, Helvetica, sans-serif; font-size:1.5em; color:#d55000; line-height:100%; font-weight:normal; }
h2 { padding:0px; margin:0px 0px 8px; font-family:Arial, Helvetica, sans-serif; font-size:1.2em; color:#000; font-weight:bold; line-height:140%; border-bottom:1px solid #d6d4d4; display:block; }
h3 { padding:0px; margin:0px 0px 5px; font-family:Arial, Helvetica, sans-serif; font-size:1.1em; color:#000; font-weight:bold; line-height:140%; }

a { color:#005fce; text-decoration:none; }
a:hover { color:#005fce; text-decoration:underline; }
a:visited { color:#004aa0; text-decoration:none; }

p { padding:0px; margin:0px 0px 20px; }
img { padding:0px; margin:0px 0px 20px; border:none; }
p img, pre img, tt img, li img, h1 img, h2 img { margin-bottom:0px; } 

ul { padding:0px; margin:0px 0px 20px 23px; list-style:square; }
ul li { padding:0px; margin:0px 0px 7px 0px; }
ul li ul { padding:5px 0px 0px; margin:0px 0px 7px 23px; }
ul li ol li { list-style:decimal; }
ol { padding:0px; margin:0px 0px 20px 0px; list-style:decimal; }
ol li { padding:0px; margin:0px 0px 7px 23px; list-style-type:decimal; }
ol li ol { padding:5px 0px 0px; margin:0px 0px 7px 0px; }
ol li ol li { list-style-type:lower-alpha; }
ol li ul { padding-top:7px; }
ol li ul li { list-style:square; }

.content { font-size:1.2em; line-height:140%; padding: 20px; }

pre, code { font-size:12px; }
tt { font-size: 1.2em; }
pre { margin:0px 0px 20px; }
pre.codeinput { padding:10px; border:1px solid #d3d3d3; background:#f7f7f7; }
pre.codeoutput { padding:10px 11px; margin:0px 0px 20px; color:#4c4c4c; }
pre.error { color:red; }

@media print { pre.codeinput, pre.codeoutput { word-wrap:break-word; width:100%; } }

span.keyword { color:#0000FF }
span.comment { color:#228B22 }
span.string { color:#A020F0 }
span.untermstring { color:#B20000 }
span.syscmd { color:#B28C00 }

.footer { width:auto; padding:10px 0px; margin:25px 0px 0px; border-top:1px dotted #878787; font-size:0.8em; line-height:140%; font-style:italic; color:#878787; text-align:left; float:none; }
.footer p { margin:0px; }
.footer a { color:#878787; }
.footer a:hover { color:#878787; text-decoration:underline; }
.footer a:visited { color:#878787; }

table th { padding:7px 5px; text-align:left; vertical-align:middle; border: 1px solid #d6d4d4; font-weight:bold; }
table td { padding:7px 5px; text-align:left; vertical-align:top; border:1px solid #d6d4d4; }





  </style></head><body><style>
.open_example { 
    padding:0px 0px 1px 0px;
    margin:20px;
    font-size:0.9em;
    border:1px solid #aeaeae;
    display:block;
    float:right;
    border-radius:5px; -moz-border-radius:5px; -webkit-border-radius:5px;
    background: #ffffff; /* Old browsers */
    background: -moz-linear-gradient(top, #FFFFFF 0%, #E6E6E6 100%); /* FF3.6+ */	
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#FFFFFF), color-stop(100%,#E6E6E6)); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top, #FFFFFF 0%,#E6E6E6 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top,  #ffffff 0%,#e6e6e6 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top,  #ffffff 0%,#e6e6e6 100%); /* IE10+ */
    background: linear-gradient(top,  #ffffff 0%,#e6e6e6 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#FFFFFF', endColorstr='#E6E6E6',GradientType=0 ); /* IE6-9 */
}

.open_example:hover {
    background: #f3f3f3; /* Old browsers */
    background: -moz-linear-gradient(top, #f3f3f3 0%, #d7d7d7 100%); /* FF3.6+ */    
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#f3f3f3), color-stop(100%,#d7d7d7)); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top, #f3f3f3 0%,#d7d7d7 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top,  #f3f3f3 0%,#d7d7d7 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top,  #f3f3f3 0%,#d7d7d7 100%); /* IE10+ */
    background: linear-gradient(top,  #f3f3f3 0%,#d7d7d7 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#f3f3f3', endColorstr='#d7d7d7',GradientType=0 ); /* IE6-9 */
} 

.open_example a { 
    padding:6px 10px; 
    line-height:130%;
    text-decoration:none;
    float:left;
}
      </style><div class="open_example"><a href="matlab:openExample('raspberrypi/ParametricAudioEqualizerExample')">Open this Example</a></div><div class="content"><h1>Parametric Audio Equalizer</h1><!--introduction--><p>This example shows how to use  ALSA Audio Playback block from the Raspberry Pi&reg; block library to implement a parametric audio equalizer algorithm with a Simulink&reg; model and to run the model on Raspberry Pi hardware.</p><!--/introduction--><h2>Contents</h2><div><ul><li><a href="#1">Introduction</a></li><li><a href="#2">Prerequisites</a></li><li><a href="#3">Required Products</a></li><li><a href="#4">Required Hardware</a></li><li><a href="#5">Task 1 - Configure and Run the Parametric Equalizer Model</a></li><li><a href="#6">Task 2 - Change the Frequency Response of the Parametric Equalizer</a></li><li><a href="#7">Other Things to Try</a></li><li><a href="#8">Summary</a></li></ul></div><h2 id="1">Introduction</h2><p>Parametric equalizers are used to adjust the frequency response of audio systems. For example, a parametric equalizer can be used to compensate for biases with specific speakers that have peaks and dips at different frequencies.</p><p>In this example, you will implement a parametric audio equalizer with a Simulink model and then run that model on Raspberry Pi hardware. The parametric equalizer algorithm in this example provides three second-order (bi-quadratic) filters whose coefficients can be adjusted to achieve a desired frequency response. A graphical user interface (GUI) is used in simulation to dynamically adjust filter coefficients and explore behavior.</p><p>The following sections will describe how the parametric equalizer algorithm is specified,  how the performance can be assessed through simulation, and how the model is run on Raspberry Pi hardware. You will also learn how the ALSA Audio Playback block is used to output audio signals.</p><h2 id="2">Prerequisites</h2><div><ul><li>We recommend completing <a href="docid:raspberrypi_ref.example-raspberrypi_gettingstarted">Getting Started with Raspberry Pi&reg; Hardware</a> example.</li></ul></div><h2 id="3">Required Products</h2><div><ul><li>DSP System Toolbox&#8482;</li></ul></div><h2 id="4">Required Hardware</h2><p>To run this example you will need the following hardware:</p><div><ul><li>Raspberry Pi hardware</li><li>Headphones, speakers or a TV/Monitor with HDMI input</li></ul></div><img vspace="5" hspace="5" src="ParametricAudioEqualizerExample_01.png" alt=""> <h2 id="5">Task 1 - Configure and Run the Parametric Equalizer Model</h2><p>In this task, you will configure and run the parametric equalizer model on Raspberry Pi hardware.</p><p><b>1.</b>  Connect a pair of speakers or headphones to the analog audio output connector on the Raspberry Pi hardware.</p><p><b>2.</b> Open the <a href="matlab:raspberrypi_audioequalizer">Parametric Audio Equalizer</a> model.</p><p><b>3.</b> Select <b>Tools &gt; Run on Target Hardware &gt; Options...</b>. Review the parameters on the page that opens. If you performed a Firmware Update, Board information will be automatically populated with the host name, user name and password of your Raspberry Pi hardware. If you have not performed a Firmware Update or you need to change the board parameters, enter the IP address, user name and password of your Raspberry Pi hardware.</p><p><b>4.</b> In the model, make sure that the <b>Simulation mode</b> on the toolbar is set to <b>External</b>.</p><p><b>5.</b> In the Simulink model, double-click on the Signal From Workspace block. The block outputs the samples of the signal called <b>audioSignal</b> at a rate of 44100 samples per second. The <b>audioSignal</b> is read from a wave file called <b>guitartune.wav</b> in the model <b>InitFcn</b> callback. To view model callbacks click on File &gt; Model Properties &gt; Model Properties and navigate to desired callback function in the <b>Model Properties</b> GUI.</p><p><b>6.</b> In the Simulink model, double-click on the ALSA Audio Playback block. Note that this block sends the processed audio signal to the 'Default' audio device on the Raspberry Pi hardware. You can also enter the name of an audio device such as 'plughw:0,0' to send audio to a device other than the 'Default' audio device. To get a list of audio playback devices on your Raspberry Pi hardware, execute the following command on the MATLAB command line:</p><pre>r = raspberrypi;
a = listAudioDevices(r,'playback')</pre><p>The output returned by the listAudioDevices function is a structure array containing the name and the device numbers of the available audio playback devices. A typical output is:</p><pre>a(1)
    Name: ' bcm2835 - bcm2835 ALSA...'
  Device: '0,0'</pre><pre>a(2)
    Name: ' bcm2835 - bcm2835 ALSA...'
  Device: '0,1'</pre><pre>a(3)
    Name: ' USB-Audio - USB PnP Sound Device...'
  Device: '1,0'</pre><p>The output above indicates that there are three audio playback devices with ALSA audio device numbers <b>0,0</b>, <b>0,1</b> and <b>1,0</b>. The first two devices correspond to the analog audio output and the HDMI output of the Raspberry Pi board. The third device is a USB audio dongle. To use the playback device <b>0,0</b>, enter 'plughw:0,0' for the <b>Device name</b> parameter on the ALSA Audio Playback block.</p><p><b>7.</b> In the model, click the <b>Run</b> button on the toolbar to run the model on the Raspberry Pi hardware.</p><h2 id="6">Task 2 - Change the Frequency Response of the Parametric Equalizer</h2><p><b>1.</b> As the model is running on Raspberry Pi hardware, you will hear audio from the speakers/headphones connected to the Raspberry Pi hardware.</p><p><b>2.</b> A GUI displaying the frequency response of the audio equalizer will appear as shown in the picture below:</p><p><img vspace="5" hspace="5" src="../audio_equalizer_gui.png" alt=""> </p><p><b>3.</b> Click and drag the markers or lines in the Three Band Equalizer GUI to specify the desired filter response characteristics. Note the change in audio output as the frequency response of the equalizer changes.</p><p><b>4.</b> Press the <b>Stop</b> button on the model to stop model execution.</p><h2 id="7">Other Things to Try</h2><div><ul><li>Change the volume of the sound sent to speakers/headphones by tuning the <b>Gain</b> parameter in the 'Sum left &amp; right channels and to single* subsystem in the Simulink model.</li></ul></div><h2 id="8">Summary</h2><p>This example showed a Simulink model of a parametric audio equalizer. Using External mode, equalizer settings were changed in real-time as the model executed on Raspberry Pi hardware.</p><p class="footer">Copyright 2012-2015 The MathWorks, Inc.<br><a href="http://www.mathworks.com/products/matlab/">Published with MATLAB&reg; R2018b</a><br><br>
		  MATLAB and Simulink are registered trademarks of The MathWorks, Inc.  Please see <a href="http://www.mathworks.com/trademarks">www.mathworks.com/trademarks</a> for a list of other trademarks owned by The MathWorks, Inc.  Other product or brand names are trademarks or registered trademarks of their respective owners.
      </p></div><!--
##### SOURCE BEGIN #####
%% Parametric Audio Equalizer
%
% This example shows how to use  ALSA Audio Playback block from the
% Raspberry Pi(R) block library to implement a parametric audio equalizer
% algorithm with a Simulink(R) model and to run the model on Raspberry Pi
% hardware.
 
% Copyright 2012-2015 The MathWorks, Inc.

%% Introduction
%
% Parametric equalizers are used to adjust the frequency response of audio
% systems. For example, a parametric equalizer can be used to compensate
% for biases with specific speakers that have peaks and dips at different
% frequencies.
%
% In this example, you will implement a parametric audio equalizer with a
% Simulink model and then run that model on Raspberry Pi hardware. The
% parametric equalizer algorithm in this example provides three
% second-order (bi-quadratic) filters whose coefficients can be adjusted to
% achieve a desired frequency response. A graphical user interface (GUI) is
% used in simulation to dynamically adjust filter coefficients and explore
% behavior.
%
% The following sections will describe how the parametric equalizer
% algorithm is specified,  how the performance can be assessed through
% simulation, and how the model is run on Raspberry Pi hardware. You will
% also learn how the ALSA Audio Playback block is used to output audio
% signals.


%% Prerequisites
%
% * We recommend completing <docid:raspberrypi_ref.example-raspberrypi_gettingstarted Getting
% Started with Raspberry Pi(R) Hardware> example.


%% Required Products
%
% * DSP System Toolbox(TM)


%% Required Hardware
% 
% To run this example you will need the following hardware:
% 
% * Raspberry Pi hardware
% * Headphones, speakers or a TV/Monitor with HDMI input

open_system('raspberrypi_audioequalizer');


%% Task 1 - Configure and Run the Parametric Equalizer Model
%
% In this task, you will configure and run the parametric equalizer model
% on Raspberry Pi hardware.
%
% *1.*  Connect a pair of speakers or headphones to the analog audio output
% connector on the Raspberry Pi hardware.
%
% *2.* Open the <matlab:raspberrypi_audioequalizer Parametric Audio
% Equalizer> model.
%
% *3.* Select *Tools > Run on Target Hardware > Options...*. Review the
% parameters on the page that opens. If you performed a Firmware Update,
% Board information will be automatically populated with the host name,
% user name and password of your Raspberry Pi hardware. If you have not
% performed a Firmware Update or you need to change the board parameters,
% enter the IP address, user name and password of your Raspberry Pi
% hardware.
% 
% *4.* In the model, make sure that the *Simulation mode* on the toolbar is
% set to *External*.
% 
% *5.* In the Simulink model, double-click on the Signal From Workspace
% block. The block outputs the samples of the signal called *audioSignal*
% at a rate of 44100 samples per second. The *audioSignal* is read from a
% wave file called *guitartune.wav* in the model *InitFcn* callback. To
% view model callbacks click on File > Model Properties > Model Properties
% and navigate to desired callback function in the *Model Properties* GUI.
%
% *6.* In the Simulink model, double-click on the ALSA Audio Playback
% block. Note that this block sends the processed audio signal to the
% 'Default' audio device on the Raspberry Pi hardware. You can also enter
% the name of an audio device such as 'plughw:0,0' to send audio to a
% device other than the 'Default' audio device. To get a list of audio
% playback devices on your Raspberry Pi hardware, execute the following
% command on the MATLAB command line:
%
%  r = raspberrypi; 
%  a = listAudioDevices(r,'playback')
% 
% The output returned by the listAudioDevices function is a structure array
% containing the name and the device numbers of the available audio
% playback devices. A typical output is:
%
%  a(1)
%      Name: ' bcm2835 - bcm2835 ALSA...'
%    Device: '0,0'
%
%  a(2)
%      Name: ' bcm2835 - bcm2835 ALSA...'
%    Device: '0,1'
%
%  a(3)
%      Name: ' USB-Audio - USB PnP Sound Device...'
%    Device: '1,0'
%
% The output above indicates that there are three audio playback devices
% with ALSA audio device numbers *0,0*, *0,1* and *1,0*. The first two
% devices correspond to the analog audio output and the HDMI output of the
% Raspberry Pi board. The third device is a USB audio dongle. To use the
% playback device *0,0*, enter 'plughw:0,0' for the *Device name* parameter
% on the ALSA Audio Playback block.
%
% *7.* In the model, click the *Run* button on the toolbar to run the model
% on the Raspberry Pi hardware.



%% Task 2 - Change the Frequency Response of the Parametric Equalizer
%
% *1.* As the model is running on Raspberry Pi hardware, you will hear
% audio from the speakers/headphones connected to the Raspberry Pi
% hardware.
%
% *2.* A GUI displaying the frequency response of the audio equalizer will
% appear as shown in the picture below:
%
% <<../audio_equalizer_gui.png>>
%
% *3.* Click and drag the markers or lines in the Three Band Equalizer GUI
% to specify the desired filter response characteristics. Note the change
% in audio output as the frequency response of the equalizer changes.
%
% *4.* Press the *Stop* button on the model to stop model execution.


%% Other Things to Try
%
% * Change the volume of the sound sent to speakers/headphones by tuning
% the *Gain* parameter in the 'Sum left & right channels and to single*
% subsystem in the Simulink model.
%


%% Summary
%
% This example showed a Simulink model of a parametric audio equalizer.
% Using External mode, equalizer settings were changed in real-time as the
% model executed on Raspberry Pi hardware.
  

close_system('raspberrypi_audioequalizer', 0); 


##### SOURCE END #####
--></body></html>